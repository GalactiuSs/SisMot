@model SisMot.Models.CustomModels.EditMotelDTO
@using SisMot.Helpers
@inject BingMap bing

@{
    ViewData["Title"] = "Detalles";
}

<div class="col-md-8">
    <h1 style="color: burlywood; font-family: Oswald;">@Model.MotelName</h1>
    <div >
        @if (Model.PhotosPaths != null)
        {
            foreach (var image in Model.PhotosPaths)
        {
                <img src="../@Url.Content(image)" alt="Image" style="height:170px; width:170px;"/>
            }
        }
    </div>
    <br/>
    <div class="row">
        <div class="col-md-8">
            <h2 style="color: #4F3803; font-family: Oswald;">Información del motel</h2>
            <div class="form-group">
                <label style="color: #4F3803; font-family: Oswald; font-size:22px;" for="descripcionMotel">Breve descripción y ambiente:</label>
                <textarea style="font-size:22px; background:none; border-color:burlywood; color:burlywood" class="form-control" asp-for="MotelDescription" rows="4" disabled></textarea>
            </div>
            <div class="form-group">
                <label style="color: #4F3803; font-family: Oswald; font-size:22px;">Precio Bs:</label>
                <input style="font-size:22px; background:none; border-color:burlywood; color:burlywood" class="form-control" asp-for="MotelPrice" disabled>
            </div>
            <div class="form-group">
                <label style="color: #4F3803; font-family: Oswald; font-size:22px;">Numero de Celular:</label>
                <input style="font-size:22px; background:none; border-color:burlywood; color:burlywood" type="number" class="form-control" asp-for="MotelPhoneNumber" disabled>
            </div>
            <div class="form-group">
                <input asp-for="MotelLatitude" id="txtLatitude" type="number" style="display: none" step="any" disabled/>
                <input asp-for="MotelLongitude" id="txtLongitude" type="number" style="display: none" step="any" disabled />
            </div>
            <div>
                <a class="btn btn-primary" style="color: #4F3803; font-family: Oswald; font-size:20px; background-color:tan; border-color:tan;" asp-action="Index" asp-controller="Motel">Volver</a>
            </div>
        </div>

        <div class="col-md-4">
            <div id="map" dropzone="" style="margin-top:20px; width: 450px; height: 450px;"></div>

        </div>
    </div>
</div>

@section Scripts
{
    <script>
        const txtLatitude = document.getElementById('txtLatitude');
        const txtLongitude = document.getElementById('txtLongitude');
            
        document.addEventListener('DOMContentLoaded', () => {
            
        })
        
         function loadMapScenario() {
            let map = new Microsoft.Maps.Map(document.getElementById('map'), {
                center: new Microsoft.Maps.Location(parseFloat(txtLatitude.value), parseFloat(txtLongitude.value)),
                credentials: '@bing.Key',
                zoom: 17
            });
            let pinLocation = new Microsoft.Maps.Location(parseFloat(txtLatitude.value), parseFloat(txtLongitude.value));
            let pin = new Microsoft.Maps.Pushpin(pinLocation);
            map.entities.push(pin);
            updatedLocation(map);
        }

        //const fetchPhotos = async () => {
        //    const response = await fetch(`SisMot`);
        //    const photos = await response.json();

        //    photos.forEach(photo => {
        //        const container = document.createElement('div');
        //        container.className = 'image-container';

        //        const img = document.createElement('img');
        //        img.src = photo.url;
        //        img.alt = photo.description;

        //        container.appendChild(img);
        //        document.getElementById('gallery').appendChild(container);
        //    });
        //};

        //fetchPhotos();
    </script>
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?key=@bing.Key&callback=loadMapScenario' async defer></script>
    
    
}
